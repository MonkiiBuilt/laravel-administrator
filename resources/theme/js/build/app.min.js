"use strict";!function(n,e){n.fn.warnIfChanged=function(t){var a=!1;return this.each(function(e){var t=n(this),o=t.is("form")?t:n("form",t);n("input, textarea, select",t).on("change",function(n){a=!0}),"undefined"!=typeof CKEDITOR&&CKEDITOR.on("instanceReady",function(e){var t=n('textarea[name="'+e.editor.name+'"]');n(t).closest("form").hasClass("warn-on-change")&&e.editor.on("change",function(n){this.checkDirty()&&(a=!0)})}),o.on("submit",function(n){a=!1})}),n(e).bind("beforeunload ",function(){if(a)return"Are you sure you want to leave this page? Changes that you made may not have been saved."}),this}}(jQuery,window);
"use strict";function youtube_parser(e){var s=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,t=e.match(s);return t&&11==t[7].length?t[7]:""}function is_url_valid(e){return/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)}function assetInit(){$(".asset").each(function(e){var s=$(this).parent().find("input").val();if(""===s)$(this).hasClass("video")?($(this).html("<div class='asset-add'><svg class='icon icon-file'><use xmlns:xlink='http://www.w3.org/1999/xlink' xlink:href='#icon-file'></use></svg> ADD ASSET</div><b>- OR -</b><br><textarea class='asset-video' placeholder='Add Video Embed Code'></textarea>"),$(this).find(".asset-video").blur(function(){assetSelected($(this).parent().attr("data-id"),$(this).val())})):$(this).html("<div class='asset-add'><svg class='icon icon-file'><use xmlns:xlink='http://www.w3.org/1999/xlink' xlink:href='#icon-file'></use></svg> ADD ASSET</div>"),$(this).find(".asset-add").click(function(){assetOpen($(this).parent().attr("data-id"),$(this).parent().attr("data-title"))});else{var t=s.toLowerCase();t.indexOf("youtube.com")>=0?$(this).html("<div class='asset-clear'><svg class='icon icon-cross'><use xmlns:xlink='http://www.w3.org/1999/xlink' xlink:href='#icon-cross'></use></svg> CLEAR ASSET</div>"+s):t.indexOf("vimeo.com")>=0?$(this).html("<div class='asset-clear'><svg class='icon icon-cross'><use xmlns:xlink='http://www.w3.org/1999/xlink' xlink:href='#icon-cross'></use></svg> CLEAR ASSET</div>"+s):t.indexOf(".jpeg")>=0||t.indexOf(".jpg")>=0||t.indexOf(".png")>=0||t.indexOf(".gif")>=0?($(this).html("<div class='asset-clear'><svg class='icon icon-cross'><use xmlns:xlink='http://www.w3.org/1999/xlink' xlink:href='#icon-cross'></use></svg> CLEAR ASSET</div><img class='asset-img' width='300px' height:='auto' src='"+s+"' />"),$(this).find(".asset-img").click(function(){assetOpen($(this).parent().attr("data-id"),$(this).parent().attr("data-title"))})):$(this).html("<div class='asset-clear'><svg class='icon icon-cross'><use xmlns:xlink='http://www.w3.org/1999/xlink' xlink:href='#icon-cross'></use></svg> CLEAR ASSET</div><a href='"+s+"' target='blank'>"+s+"</a>"),$(this).find(".asset-clear").click(function(){$(this).parent().parent().find("input").val(""),assetInit()})}})}function assetOpen(e,s){$("body").css("overflow-y","hidden"),$.colorbox({iframe:!0,top:0,width:"1000px",height:"100%",href:window.assetModalURL+"?id="+e+"&title="+s,onClosed:function(){$("body").css("overflow-y","scroll")}})}function assetSelected(e,s){$("#"+e).val(s),assetInit()}function assetClose(){$.colorbox.close()}$(document).ready(function(){console.log("Project main.js loaded");var e=$(".ckeditor");e.length>0&&"undefined"!=typeof CKEDITOR&&e.each(function(e){var s=this.className.match(/ckeditor-(.*)( |$)/)[0]||"ckeditor-full";ckeditorConfig[s]&&CKEDITOR.replace(this.name,ckeditorConfig[s])}),$("form.warn-on-change").warnIfChanged(),"undefined"!=typeof CKEDITOR&&CKEDITOR.on("dialogDefinition",function(e){var s=(e.editor,e.data.name),t=e.data.definition;if("image"==s){var i=t.getContents("info");i.remove("txtBorder"),i.remove("txtHSpace"),i.remove("txtVSpace"),t.removeContents("Link")}})});var BASE=location.protocol+"//"+location.host+"/";$.get(BASE+"theme/backstage/svg/icons.svg",function(e){var s=document.createElement("div");s.className="icons-svg",s.innerHTML=(new XMLSerializer).serializeToString(e.documentElement),document.body.insertBefore(s,document.body.childNodes[0])});var ckeditorConfig={"ckeditor-full":{toolbarGroups:[{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker","editing"]},{name:"links",groups:["links"]},{name:"insert",groups:["insert"]},{name:"forms",groups:["forms"]},{name:"tools",groups:["tools"]},{name:"document",groups:["mode","document","doctools"]},{name:"others",groups:["others"]},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi","paragraph"]},{name:"styles",groups:["styles"]},{name:"colors",groups:["colors"]}],removeButtons:"Underline,Subscript,Superscript,Cut,Copy,Paste,SpecialChar,Maximize,About",filebrowserBrowseUrl:"/backstage/2017/assets/editor",allowedContent:!0},"ckeditor-basic":{toolbar:[{name:"basicstyles",items:["Bold","Italic"]},{name:"links",items:["Link","Unlink"]}]},"ckeditor-simple":{toolbar:[{name:"basicstyles",items:["Bold","Italic"]}]},"ckeditor-simple-hr":{toolbar:[{name:"basicstyles",items:["Bold","Italic","HorizontalRule"]}]}};$(document).ready(function(){assetInit()});
//# sourceMappingURL=app.min.js.map
